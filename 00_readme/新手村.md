# 新手村

## 一. 基本常识

### 1. 相信现代编译器的bug是很难遇到的
也就是说，当你的程序出现bug的时候，最后去怀疑编译器和系统（windows除外）

### 2. mr要有意义
最大也是最重要的原因是——在采用squash合入master的时候，mr的title会作为这次merge的commit信息，`没有意义的mr==没有意义的commit`。那么，为什么commit要有意义呢……去面壁吧，不说这个问题了……

### 3. 不明白的代码，不要乱用！
不明白的代码，不要乱用！
不明白的代码，不要乱用！
OK我说了三遍了

### 4. 不要有过多输出
尤其是你开发的是一个包会被别人调用的情况下，因为别人连关都关不掉

### 5. 没有经过profile过的程序做瓶颈优化都是耍流氓
profile的方法参见：（假装有东西，等写完放过来）

### 6. 万恶之源
有的人说重复代码是万恶之源，有的人说过早的重构（或优化）是万恶之源
这两种说法虽然是矛盾的，但是都说出了部分的真相——我个人的偏好是：
```
if 存在重复代码 {
    if 不需要使用interface(go和java里的interface，python里的抽象类，c++里的模板)就可以解决{
        do 干他！
    } else {
        if 处于项目早期 {
            项目优先
        } else {
            do 干他！
        }
    }
} else {
    print(“大侠再见”)
}
```

### 7. 尊重IDE
最重要的是尊重编译器的warning

### 8. 代码不要给其他人造成心智负担
包括但不仅限于：
* merge后的分支需要删除，无论本地还是远端，都要删除
* 不要用注释代码的方式保留老代码；注释要有意义
* 使用正确的变量名
* （Python）使用variable annotation

### 9. 减少中文的使用
包括但不仅限于，中文文档、CSDN、百度搜索等等

### 10. PyCharm 的doc string采用google style

### 11. 减少语言原生http request的使用，改用成熟的包
我们后面会有越来越多的调用其他service的情况，请使用更加成熟更加上层的包（例如go的gorequests、resty或者python的requests），尽量减少原生http包的使用

原因包括但不仅限于：
* 原生的http包是为了底层应用的，而我们是上层应用，不需要那么底层，就好像我们的web service不会手动从底层写一样
* 更加方便，许多的设置更加人性
* 不需要处理字符转义、文件读写等各种细节问题

### 12. 长时间离开工位请关闭屏幕
尤其是每天走之前，请记得对自己的电脑锁屏，避免不必要的麻烦

不然的话会在群里看到自己要请大家喝奶茶的消息 :)

### 13. 程序是很少骗人的，如果出现了本地和远端或者服务器和docker运行结果不一致的情况，请先保证【环境一致】



## 二. 学会提问

将这一点单独拿出来讲是因为它很重要！！！！

1. 问别人错误之前，先看错误提示，如果根据错误提示能找到的答案，不要问
2. google是个好东西，很多error可以搜索得到
3. 优先使用英文文档

## 三. 强制使用
1. termius （windows用户强制，会折腾microsoft terminal的请忽略我）
2. source tree （mac和windows）[ShannonWIKI](https://wiki.shannonai.com/books/%E6%96%B0%E9%97%BB%E8%88%86%E6%83%85/page/%E8%88%86%E6%83%85%E6%96%B0%E4%BA%BA%E6%8C%87%E5%8D%97)
3. PyCharm的save action插件，在save的时候选择reformat以及optimize
4. GoLand的File Watchers里启用go fmt
5. 每个项目都要要设置line seperator为Unix模式，也就是使用`\n`。windows用户要尤其注意。
6. 除非你厉害，否则不要用vim或者emacs，人类发明很多工具是有理由的

## 四. 严格禁止
1. 使用IDE做VCS
2. 绝对路径，之前提过了
3. 用python版本号、公司名称、个人名称等等来命名python虚拟环境

## 五. 一些代码规范

### 1. 关于文件路径
规定一下：
1. 除了config文件，项目中绝对不准使用绝对路径！！！！！！！
2. 在任何地方，都不允许使用linux的相对路径，也就是”../“这种形式

解释一下正确做法：

项目中，数据分为两种：一种是不需要外部传入的数据，这类数据的路径一定是相对于项目根目录的路径的，具体做法是用Python的函数获取项目的路径，然后其他素有路径都是相对于这个录几个的；另一种是外部挂载的数据，一般是是大数据或者敏感数据，这类是将路径写在config中，然后将config忽略来做到的

不允许绝对路径，不允许赤裸裸的相对路径！！！！！！！！！！！！！！！

### 2. 参数过多时
python代码，如果参数过多需要换行，建议采用这种形式：
```
function(
    para_1,
    para_2,
    …
)
```

而不是
```
function(para_1,
         para_2,
         …)
```
更不能
```
function(para_1,
         para_2
         )
```

### 3. 不要乱用字典
各位，很严肃的提醒，字典（python里的dict，go、C++、java里的map）这种数据结构，适用于存储key-value结构，而且是key不定的情况，如果key是确定的，最好声明一个类来存储，否则代码维护性极差，我们之前已经吃过亏了，不要再吃亏了。

因此，以后如果key是确定的情况，严禁使用字典作为传参手段，尤其是python，不要把编程语言的字典当成json来用。

### 4. git的开发规范

从master上，新建分支，然后做修改，commit，push，远端merge后，checkout到master，然后拉取远端，然后进入下一轮开发。严禁在master上做修改，然后checkout到新分支，然后提交！！！！